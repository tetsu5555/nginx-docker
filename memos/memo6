HAクラスタ構成
- 複数台のサーバーを使ってサーバーを冗長化するHAクラスタ
- 動作しているクラスタの他に同じ処理ができるように設定されたサーバーを待機させておき、動作しているサーバーに障害が発生した時に、待機しているサーバーに切り替えることでサーバーを継続させる。
- Webサーバーやロードバランサーを冗長化させることによってサービス停止の少ないWebサイトを提供できるようになる

クラスタとは？
- 同じように動作する複数のサーバーを使い、サービスを提供するシステム
- 種類
  - 負荷分散クラスタ
    - 負荷を複数のサーバーに分散させて性能を向上させる
    - サーバーを複数同時に稼働させ、ロードバランサがなんらかの形で複数のサーバーに負荷を振り分けることで動作する
  - HA(High Availability)クラスタ
    - 複数のサーバーで冗長性を持たせて可用性をあげる
    - 稼働系と待機系に分かれ、通常は稼働系が動作する
    - 稼働系がダウンした場合には自動的に待機系に切り替わる
    - 負荷分散クラスタに使うロードバランサが各サーバーの稼働状況を把握して、ダウンしているサーバーを分散の対象から外すことで可用性を向上させていれば、負荷分散クラスタがHAクラスタの機能もかねる
  - HPC(Hight Performance Computing)クラスタ
    - スパコンで使われている

冗長構成の考え方
- RAS
 - Reliability（信頼性）
 - Availability（可用性）
 - Serviceability（保守性）


ロードバランサーの冗長化構成
- nginxで構成したロードバランサを冗長化させるHAクラスタ
  - 同じネットワーク内に同じ設定のロードバランサを2台構築
  - それぞれが同様にバックエンドのWebサーバーに負荷分散するリバースプロキシとして動作するよう、設定を行う
  - 2台の別々のIPアドレスを持ったロードバランサに一つのIPアドレスを追加で割り当てる
  - 追加したIPアドレスを二台で引き継ぎながら利用することで冗長化する
    - このIPアドレスは普段はどちらか片方のサーバーに割り当てられており、サーバーが故障してダウンした時はもう片方のサーバーがIPアドレスを引き継いでサービスを継続する
    - クライアントから見ると、同じIPアドレスで同じ動作をするサービスにアクセスし続けられるため、片方がダウンしても影響なくサービスを利用できる

VIP（仮想IPアドレス）
- 引き継いで使うIPアドレス
- サーバーに紐づくIPアドレスの他に複数のサーバーで引き継いで使えるVIPを割り当てて使う
